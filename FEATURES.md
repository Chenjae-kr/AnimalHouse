# 3D 동물 키우기 웹사이트 기능 명세서

## 📋 프로젝트 개요

**프로젝트명**: AnimalHouse  
**목표**: HammyHome과 유사한 3D 인터랙티브 동물 키우기 웹 애플리케이션  
**기술 스택**: Vue.js 3 + Three.js + Vite  
**타겟 플랫폼**: 웹 브라우저 (데스크톱 및 모바일)

---

## 🎯 핵심 기능 (MVP - Minimum Viable Product)

### 1. 3D 동물 뷰어
**우선순위**: 🔴 High

#### 1.1 3D 렌더링
- **기능**: 브라우저에서 3D 동물 모델을 실시간으로 렌더링
- **상세 요구사항**:
  - Three.js WebGL 렌더러 사용
  - 부드러운 프레임레이트 유지 (최소 30fps)
  - 반응형 캔버스 크기 조정 (창 크기에 맞춰 자동 조절)
  - 안티앨리어싱 적용으로 부드러운 외곽선
- **입력**: 3D 모델 파일 (GLTF/GLB 형식)
- **출력**: 화면에 렌더링된 3D 동물
- **예외 처리**: 
  - 모델 로딩 실패 시 기본 모델 표시
  - WebGL 미지원 브라우저 경고 메시지

#### 1.2 카메라 컨트롤
- **기능**: 사용자가 자유롭게 시점을 변경할 수 있음
- **상세 요구사항**:
  - OrbitControls를 활용한 마우스/터치 조작
  - 회전: 좌우/상하 드래그
  - 줌: 마우스 휠 또는 핀치 제스처
  - 팬: 우클릭 드래그 또는 2손가락 드래그
  - 카메라 회전 범위 제한 (바닥 아래로 못 보게)
- **제약 조건**:
  - 최소/최대 줌 거리 설정
  - 부드러운 댐핑(damping) 효과
- **사용자 경험**: 직관적이고 자연스러운 조작감

#### 1.3 3D 환경 설정
- **기능**: 동물이 서 있는 공간 및 조명 설정
- **상세 요구사항**:
  - 바닥 평면(Plane) 또는 그리드
  - 배경색 또는 하늘 텍스처
  - 주 조명(Directional Light)과 보조 조명(Ambient Light)
  - 그림자 효과 (선택 사항)
- **시각적 목표**: 밝고 따뜻한 분위기

---

### 2. 동물 상태 시스템
**우선순위**: 🔴 High

#### 2.1 상태 파라미터
- **기능**: 동물의 현재 상태를 숫자로 관리
- **파라미터 목록**:
  ```javascript
  {
    hunger: 0-100,      // 배고픔 (높을수록 배고픔)
    happiness: 0-100,   // 행복도
    health: 0-100,      // 건강
    energy: 0-100       // 에너지 (선택 사항)
  }
  ```
- **초기값**: 모든 파라미터 50에서 시작
- **변화 규칙**:
  - `hunger`: 매 분마다 +2씩 증가
  - `happiness`: 상호작용 없으면 매 5분마다 -1씩 감소
  - `health`: `hunger`가 80 이상이면 매 분마다 -1씩 감소
- **범위 제한**: 모든 값은 0-100 사이로 제한

#### 2.2 상태 표시 UI
- **기능**: 현재 상태를 시각적으로 표시
- **UI 요소**:
  - 각 파라미터별 진행 바(Progress Bar)
  - 아이콘 + 레이블 + 수치/바
  - 색상 코드화:
    - 🟢 녹색: 70-100 (좋음)
    - 🟡 노란색: 30-69 (보통)
    - 🔴 빨간색: 0-29 (나쁨)
- **위치**: 화면 상단 또는 좌측
- **갱신**: 실시간 자동 갱신

#### 2.3 데이터 저장
- **기능**: 브라우저를 닫아도 데이터 유지
- **저장 방법**: localStorage API 사용
- **저장 데이터**:
  ```javascript
  {
    animalState: { hunger, happiness, health, energy },
    lastUpdateTime: timestamp,
    currentAnimalId: string,
    items: array
  }
  ```
- **저장 시점**: 
  - 상태 변경 시마다 자동 저장
  - 페이지 이탈 전(beforeunload)
- **로딩**: 페이지 로드 시 자동으로 불러오기
- **예외 처리**: localStorage 미지원 시 경고 및 세션 저장

---

### 3. 상호작용 기능
**우선순위**: 🔴 High

#### 3.1 먹이주기
- **기능**: 동물에게 먹이를 주어 배고픔 감소
- **UI**: "먹이주기" 버튼 (🍖 아이콘)
- **상세 동작**:
  1. 버튼 클릭
  2. `hunger` 수치 -30 감소
  3. 먹이 먹는 애니메이션 재생 (있다면)
  4. 효과음 재생 (선택 사항)
  5. 피드백 메시지 표시: "냠냠! 맛있어요!"
- **쿨다운**: 30초마다 1번만 가능
- **제약 조건**: `hunger`가 20 이하면 "아직 배고프지 않아요" 메시지

#### 3.2 놀아주기
- **기능**: 동물과 놀아서 행복도 증가
- **UI**: "놀아주기" 버튼 (🎾 아이콘)
- **상세 동작**:
  1. 버튼 클릭
  2. `happiness` 수치 +25 증가
  3. 놀기 애니메이션 재생 (점프, 회전 등)
  4. 하트 파티클 이펙트
  5. 피드백 메시지: "와! 재미있어요!"
- **쿨다운**: 1분마다 1번만 가능
- **제약 조건**: `energy`가 20 이하면 "너무 피곤해요" 메시지

#### 3.3 동물 클릭 인터랙션
- **기능**: 동물을 직접 클릭하면 반응
- **기술**: Three.js Raycaster 사용
- **상세 동작**:
  1. 3D 모델 위에 마우스 클릭
  2. 클릭 위치 감지
  3. 작은 애니메이션 재생 (끄덕이기 등)
  4. 랜덤 메시지 표시: "안녕!", "만나서 반가워!"
- **피드백**: 클릭 위치에 파티클 효과

---

### 4. 액션 버튼 패널
**우선순위**: 🟡 Medium

#### 4.1 버튼 레이아웃
- **기능**: 모든 액션 버튼을 한 곳에 모아 표시
- **버튼 목록**:
  - 🍖 먹이주기
  - 🎾 놀아주기
  - 🛁 씻기기 (선택 사항)
  - 💤 재우기 (선택 사항)
- **위치**: 화면 하단 중앙 또는 우측
- **스타일**: 
  - 둥근 버튼 (50-60px)
  - 호버 시 확대 효과
  - 쿨다운 중 비활성화 표시 (그레이스케일 + 타이머)
- **반응형**: 모바일에서는 작은 버튼으로 조정

#### 4.2 쿨다운 표시
- **기능**: 액션 사용 후 재사용까지 남은 시간 표시
- **시각적 요소**:
  - 버튼 위에 원형 프로그레스 오버레이
  - 남은 시간 초 단위 표시
- **동작**: 쿨다운 끝나면 버튼 다시 활성화

---

### 5. 알림 및 피드백 시스템
**우선순위**: 🟡 Medium

#### 5.1 토스트 메시지
- **기능**: 액션 결과나 상태 변화를 화면에 표시
- **표시 위치**: 화면 상단 중앙
- **표시 시간**: 3초 후 자동 사라짐
- **스타일**: 
  - 반투명 배경
  - 부드러운 페이드 인/아웃 애니메이션
- **메시지 타입**:
  - 성공: 녹색 배경
  - 경고: 노란색 배경
  - 오류: 빨간색 배경

#### 5.2 파티클 이펙트
- **기능**: 액션 수행 시 시각적 효과
- **효과 종류**:
  - 먹이주기: 빵 부스러기 파티클
  - 놀아주기: 하트 또는 별 파티클
  - 클릭: 반짝이는 점
- **구현**: Three.js Points 또는 Sprites 사용
- **애니메이션**: 위로 떠오르며 사라짐

---

## 🎨 추가 기능 (Phase 2)

### 6. 애니메이션 시스템
**우선순위**: 🟡 Medium

#### 6.1 동물 애니메이션
- **기능**: 상황에 맞는 애니메이션 재생
- **애니메이션 목록**:
  - **Idle**: 기본 대기 상태 (자연스러운 호흡)
  - **Walk**: 걷기 (랜덤하게 가끔 걸어다님)
  - **Eat**: 먹기 (먹이주기 버튼 클릭 시)
  - **Play**: 놀기 (놀아주기 버튼 클릭 시)
  - **Sleep**: 자기 (밤 시간 또는 에너지 0일 때)
- **전환**: 부드러운 크로스페이드 애니메이션
- **랜덤 행동**: 5-10분마다 랜덤하게 걷기 또는 스트레칭

#### 6.2 카메라 애니메이션
- **기능**: 특정 이벤트 시 카메라 자동 이동
- **예시**:
  - 먹이주기 시 동물 얼굴로 줌인
  - 놀아주기 시 전체 모습 보이도록 줌아웃
- **구현**: GSAP 또는 Three.js Tween 라이브러리 사용

---

### 7. 아이템 및 장식 시스템
**우선순위**: 🟢 Low

#### 7.1 아이템 인벤토리
- **기능**: 사용자가 보유한 아이템 목록
- **아이템 종류**:
  - 먹이 종류: 사과, 고기, 우유 등
  - 장난감: 공, 인형 등
  - 장식: 모자, 리본 등
- **UI**: 하단 또는 측면 패널
- **획득 방법**: 
  - 초기 기본 아이템 지급
  - 매일 로그인 보너스
  - 미션 달성 보상

#### 7.2 장식 배치
- **기능**: 씬에 장식 오브젝트 배치
- **UI**: 드래그 앤 드롭으로 배치
- **저장**: localStorage에 위치 저장
- **제한**: 최대 10개까지 배치 가능

---

### 8. 동물 선택 시스템
**우선순위**: 🟢 Low

#### 8.1 동물 목록
- **기능**: 여러 동물 중 선택 가능
- **동물 종류**:
  - 강아지 🐕
  - 고양이 🐈
  - 토끼 🐰
  - 햄스터 🐹
- **UI**: 시작 화면에서 선택 또는 설정 메뉴
- **데이터**: 각 동물별 별도 상태 저장

#### 8.2 동물 변경
- **기능**: 키우던 동물 변경
- **제약**: 기존 동물 상태 저장 후 변경
- **UI**: 설정 메뉴에서 "동물 변경" 버튼

---

### 9. 업적 시스템
**우선순위**: 🟢 Low

#### 9.1 업적 목록
- **기능**: 특정 조건 달성 시 업적 해금
- **업적 예시**:
  - "첫 만남": 첫 로그인
  - "좋은 주인": 모든 상태 70 이상 유지 1일
  - "애정이 넘쳐": 먹이주기 100회
  - "친구": 7일 연속 접속
- **보상**: 특별 아이템 또는 칭호

#### 9.2 업적 UI
- **표시**: 설정 메뉴 내 별도 탭
- **알림**: 업적 달성 시 축하 메시지

---

### 10. 설정 및 옵션
**우선순위**: 🟡 Medium

#### 10.1 설정 메뉴
- **기능**: 게임 설정 변경
- **옵션**:
  - 🔊 효과음 On/Off
  - 🎵 배경음악 On/Off
  - 📱 알림 허용 (선택 사항)
  - 🌓 다크모드 (선택 사항)
- **UI**: 우측 상단 톱니바퀴 아이콘

#### 10.2 데이터 관리
- **기능**: 저장 데이터 관리
- **옵션**:
  - 데이터 초기화 (확인 대화상자)
  - 데이터 내보내기 (JSON 파일)
  - 데이터 불러오기 (JSON 파일 업로드)

---

## 📱 모바일 대응

### 11. 반응형 디자인
**우선순위**: 🟡 Medium

#### 11.1 레이아웃 조정
- **데스크톱**: 
  - 넓은 3D 뷰
  - 측면 또는 하단에 UI 패널
- **태블릿**:
  - 중간 크기 3D 뷰
  - 하단 버튼 크기 증가
- **모바일**:
  - 전체 화면 3D 뷰
  - 오버레이 형태의 UI
  - 버튼 크기 터치 친화적으로 확대

#### 11.2 터치 제스처
- **구현**:
  - 1손가락 드래그: 회전
  - 2손가락 핀치: 줌
  - 2손가락 드래그: 팬
- **최적화**: 터치 이벤트 딜레이 최소화

---

## 🎵 사운드 시스템
**우선순위**: 🟢 Low

### 12. 효과음
- **효과음 목록**:
  - 먹이 먹을 때: "냠냠" 소리
  - 놀 때: 즐거운 소리
  - 클릭 시: 부드러운 클릭 소리
- **형식**: MP3 또는 OGG
- **볼륨**: 설정 메뉴에서 조절 가능

### 13. 배경음악
- **기능**: 부드러운 배경 음악 무한 반복
- **옵션**: 음소거 버튼
- **자동 재생 이슈**: 사용자 첫 상호작용 후 재생

---

## 📊 성능 요구사항

### 14. 성능 목표
- **프레임레이트**: 
  - 데스크톱: 60fps
  - 모바일: 30fps 이상
- **로딩 시간**: 
  - 초기 로딩: 3초 이내
  - 3D 모델 로딩: 2초 이내
- **메모리 사용량**: 
  - 최대 200MB (모바일)
  - 최대 500MB (데스크톱)

### 15. 최적화 방안
- 텍스처 압축 (Draco, KTX2)
- LOD(Level of Detail) 시스템
- 불필요한 렌더링 방지 (requestAnimationFrame 최적화)
- 이미지 최적화 (WebP 형식)

---

## 🔒 보안 및 프라이버시

### 16. 데이터 처리
- **로컬 저장**: 모든 데이터는 사용자 브라우저에만 저장
- **외부 전송 없음**: 사용자 데이터를 서버로 전송하지 않음
- **개인정보 미수집**: 이름, 이메일 등 수집 안 함

---

## 🧪 테스트 요구사항

### 17. 테스트 항목
- **브라우저 호환성**:
  - Chrome (최신 버전)
  - Firefox (최신 버전)
  - Safari (최신 버전)
  - Edge (최신 버전)
- **기기 테스트**:
  - 데스크톱 (Windows, macOS)
  - 모바일 (iOS, Android)
  - 태블릿
- **기능 테스트**:
  - 모든 버튼 동작 확인
  - 상태 변화 정확도
  - 데이터 저장/로딩

---

## 📈 향후 확장 가능성

### Phase 3 - 고급 기능 (배포 후)
- **소셜 기능**: 친구 동물 방문
- **미니게임**: 간단한 게임으로 보상 획득
- **계절 시스템**: 배경이 계절에 따라 변화
- **날씨 효과**: 비, 눈 등 날씨 효과
- **사진 모드**: 스크린샷 저장 및 공유
- **커스터마이징**: 동물 색상, 패턴 변경

---

## ✅ 기능 개발 우선순위 요약

### 🔴 High Priority (MVP - 필수)
1. 3D 동물 뷰어 (렌더링, 카메라)
2. 동물 상태 시스템
3. 먹이주기, 놀아주기 기능
4. 상태 표시 UI
5. 데이터 저장/로딩

### 🟡 Medium Priority (중요하지만 나중에 가능)
6. 애니메이션 시스템
7. 토스트 메시지
8. 설정 메뉴
9. 반응형 디자인

### 🟢 Low Priority (Nice to Have)
10. 아이템 시스템
11. 업적 시스템
12. 동물 선택
13. 사운드

---

**문서 버전**: 1.0  
**최종 수정일**: 2026-02-12  
**작성자**: 챈재
